# دليل اختبار وحدة: إدارة الموردين

## الهدف
التحقق من قدرة المستخدمين على إنشاء، عرض، بحث، تحديث، وحذف سجلات الموردين بنجاح، والتأكد من سلامة البيانات وصلاحيات المستخدم.

---

## المتطلبات الأساسية للمُختبِر
1. الوصول إلى نظام إدارة المبيعات المنشور أو الذي يعمل محليًا.
2. بيانات اعتماد مستخدم بصلاحيات مناسبة (مثل `view-suppliers`, `create-suppliers`, `edit-suppliers`, `delete-suppliers`).
3. فهم أساسي لكيفية التنقل داخل التطبيق.

---

## حالات الاختبار

### 1. عرض قائمة الموردين (/suppliers)

#### TE1.1: الوصول إلى صفحة الموردين
- **الإجراء**: قم بتسجيل الدخول. انتقل إلى قسم "الموردين" من قائمة التنقل الرئيسية.
- **النتيجة المتوقعة**: يتم تحميل صفحة قائمة الموردين بنجاح مع عرض جدول الموردين الحاليين أو رسالة "لم يتم العثور على موردين" إذا كانت القائمة فارغة.

#### TE1.2: ترقيم الصفحات (Pagination)
- **الإجراء**: استخدم أزرار الترقيم (التالي، السابق، أرقام الصفحات).
- **النتيجة المتوقعة**: يتم تحديث الجدول لعرض الموردين حسب الصفحة المختارة.

#### TE1.3: البحث عن الموردين (بالاسم)
- **الإجراء**: أدخل اسم مورد في شريط البحث.
- **النتيجة المتوقعة**: يتم تصفية الموردين المطابقين فقط.

#### TE1.4: البحث عن الموردين (باسم المسؤول)
- **الإجراء**: أدخل اسم المسؤول الخاص بالمورد.
- **النتيجة المتوقعة**: يعرض الموردين المرتبطين باسم المسؤول المدخل.

#### TE1.5: البحث عن الموردين (بالبريد الإلكتروني)
- **الإجراء**: أدخل بريد إلكتروني لمورد معروف.
- **النتيجة المتوقعة**: يتم العثور على المورد المرتبط بالبريد الإلكتروني.

#### TE1.6: البحث عن الموردين (بدون نتائج)
- **الإجراء**: أدخل مصطلح غير مطابق.
- **النتيجة المتوقعة**: تظهر رسالة "لا توجد نتائج تطابق بحثك".

#### TE1.7: مسح البحث
- **الإجراء**: بعد البحث، قم بمسح حقل البحث.
- **النتيجة المتوقعة**: تظهر جميع الموردين.

---

### 2. إضافة مورد جديد

#### TE2.1: فتح نموذج إضافة مورد
- **الإجراء**: انقر على زر "إضافة مورد جديد".
- **النتيجة المتوقعة**: يتم فتح نموذج يحتوي على الحقول المطلوبة.

#### TE2.2: إضافة مورد - جميع الحقول صالحة
- **الإجراء**: أدخل بيانات صالحة لجميع الحقول وانقر "حفظ".
- **النتيجة المتوقعة**: يتم إضافة المورد بنجاح مع رسالة تأكيد.

#### TE2.3: إضافة مورد - الحقول المطلوبة مفقودة (اسم المورد)
- **الإجراء**: اترك حقل "اسم المورد" فارغًا.
- **النتيجة المتوقعة**: تظهر رسالة خطأ بجانب حقل "اسم المورد".

#### TE2.4: إضافة مورد - صيغة بريد إلكتروني غير صالحة
- **الإجراء**: أدخل بريد إلكتروني غير صالح.
- **النتيجة المتوقعة**: تظهر رسالة خطأ تحقق لحقل البريد الإلكتروني.

#### TE2.5: إضافة مورد - بريد إلكتروني مكرر
- **الإجراء**: حاول إضافة مورد بنفس البريد الإلكتروني.
- **النتيجة المتوقعة**: تظهر رسالة خطأ "البريد الإلكتروني مسجل مسبقاً".

#### TE2.6: إضافة مورد - الحقول الاختيارية فارغة
- **الإجراء**: أدخل اسم المورد فقط.
- **النتيجة المتوقعة**: يتم إضافة المورد بنجاح مع قيم فارغة للحقول الاختيارية.

#### TE2.7: إلغاء نموذج إضافة مورد
- **الإجراء**: انقر "إلغاء" أثناء إدخال البيانات.
- **النتيجة المتوقعة**: يتم إغلاق النموذج دون إنشاء المورد.

---

### 3. تعديل مورد موجود

#### TE3.1: فتح نموذج تعديل مورد
- **الإجراء**: انقر على زر "تعديل" بجانب المورد.
- **النتيجة المتوقعة**: يتم فتح النموذج مع بيانات المورد.

#### TE3.2: تعديل مورد - تحديث اسم المورد
- **الإجراء**: حدث اسم المورد وانقر "حفظ".
- **النتيجة المتوقعة**: يتم تحديث اسم المورد بنجاح.

#### TE3.3: تعديل مورد - تحديث البريد الإلكتروني (إلى بريد جديد)
- **الإجراء**: غير البريد الإلكتروني إلى جديد.
- **النتيجة المتوقعة**: يتم تحديث البريد الإلكتروني.

#### TE3.4: تعديل مورد - بريد إلكتروني موجود
- **الإجراء**: حاول تغيير البريد إلى بريد مستخدم مسبقًا.
- **النتيجة المتوقعة**: تظهر رسالة خطأ.

#### TE3.5: تعديل مورد - بيانات غير صالحة
- **الإجراء**: أدخل اسمًا فارغًا.
- **النتيجة المتوقعة**: تظهر رسالة خطأ بجانب الحقل.

#### TE3.6: إلغاء نموذج تعديل المورد
- **الإجراء**: انقر "إلغاء".
- **النتيجة المتوقعة**: لا يتم حفظ التغييرات.

---

### 4. حذف مورد

#### TE4.1: بدء حذف مورد
- **الإجراء**: انقر على زر "حذف".
- **النتيجة المتوقعة**: تظهر نافذة تأكيد.

#### TE4.2: إلغاء الحذف
- **الإجراء**: انقر "إلغاء" في نافذة التأكيد.
- **النتيجة المتوقعة**: يبقى المورد دون حذف.

#### TE4.3: تأكيد الحذف
- **الإجراء**: انقر "تأكيد".
- **النتيجة المتوقعة**: يتم حذف المورد بنجاح مع رسالة تأكيد.

#### TE4.4: محاولة حذف مورد لديه سجلات مشتريات مرتبطة
- **الإجراء**: حاول حذف مورد مرتبط بمشتريات.
- **النتيجة المتوقعة**: تظهر رسالة خطأ بسبب السجلات المرتبطة.

---

### 5. الصلاحيات

#### TE5.1: مستخدم بدون صلاحية view-suppliers
- **الإجراء**: تسجيل الدخول كمستخدم غير مصرح له.
- **النتيجة المتوقعة**: لا يمكنه رؤية صفحة الموردين.

#### TE5.2: مستخدم لديه view-suppliers ولكن ليس create-suppliers
- **الإجراء**: قم بتسجيل الدخول.
- **النتيجة المتوقعة**: يرى الموردين، لكن لا يستطيع إضافة مورد.

#### TE5.3: مستخدم لديه view-suppliers, edit-suppliers ولكن ليس delete-suppliers
- **الإجراء**: قم بتسجيل الدخول.
- **النتيجة المتوقعة**: يمكنه التعديل وليس الحذف.

---

## ملاحظات إضافية
- تأكد من تحديث المتطلبات بناءً على التحديثات الأخيرة للنظام.
- تحقق من السلوك المتوقع مع فريق التطوير أو الوثائق الفنية.
