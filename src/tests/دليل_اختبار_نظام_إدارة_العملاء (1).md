# دليل اختبار وحدة: إدارة العملاء

## الهدف
التحقق من قدرة المستخدمين على إنشاء، عرض، بحث، تحديث، وحذف سجلات العملاء بنجاح، والتأكد من سلامة البيانات وصلاحيات المستخدم.

---

## المتطلبات الأساسية للمُختبِر
1. الوصول إلى نظام إدارة المبيعات المنشور أو الذي يعمل محليًا.
2. بيانات اعتماد مستخدم بصلاحيات مناسبة (مثال: مستخدم بدور "مدير نظام" أو لديه صلاحيات مثل `view-clients`, `create-clients`, `edit-clients`, `delete-clients`).
3. فهم أساسي لكيفية التنقل داخل التطبيق.

---

## حالات الاختبار

### 1. عرض قائمة العملاء (/clients)

#### TE1.1: الوصول إلى صفحة العملاء
- **الإجراء**: قم بتسجيل الدخول. انتقل إلى قسم "العملاء" من قائمة التنقل الرئيسية.
- **النتيجة المتوقعة**: يتم تحميل صفحة قائمة العملاء بنجاح مع عرض جدول العملاء الحاليين أو رسالة "لم يتم العثور على عملاء" إذا كانت القائمة فارغة.

#### TE1.2: ترقيم الصفحات (Pagination)
- **الإجراء**: استخدم أزرار الترقيم (التالي، السابق، أرقام الصفحات).
- **النتيجة المتوقعة**: يتم تحديث الجدول لعرض العملاء حسب الصفحة المختارة.

#### TE1.3: البحث عن العملاء (بالاسم)
- **الإجراء**: أدخل اسم عميل في شريط البحث.
- **النتيجة المتوقعة**: يتم تصفية العملاء المطابقين فقط.

#### TE1.4: البحث عن العملاء (بالبريد الإلكتروني)
- **الإجراء**: أدخل بريد إلكتروني لعميل معروف.
- **النتيجة المتوقعة**: يتم العثور على العميل المرتبط بالبريد الإلكتروني.

#### TE1.5: البحث عن العملاء (بدون نتائج)
- **الإجراء**: أدخل مصطلح غير مطابق.
- **النتيجة المتوقعة**: تظهر رسالة "لا توجد نتائج تطابق بحثك".

#### TE1.6: مسح البحث
- **الإجراء**: بعد البحث، قم بمسح حقل البحث.
- **النتيجة المتوقعة**: تظهر جميع العملاء.

---

### 2. إضافة عميل جديد

#### TE2.1: فتح نموذج إضافة عميل
- **الإجراء**: انقر على زر "إضافة عميل جديد".
- **النتيجة المتوقعة**: يتم فتح نموذج يحتوي على الحقول المطلوبة.

#### TE2.2: إضافة عميل - جميع الحقول صالحة
- **الإجراء**: أدخل بيانات صالحة لجميع الحقول وانقر "حفظ".
- **النتيجة المتوقعة**: يتم إضافة العميل بنجاح مع رسالة تأكيد.

#### TE2.3: إضافة عميل - الحقول المطلوبة مفقودة (الاسم)
- **الإجراء**: اترك حقل "الاسم" فارغًا.
- **النتيجة المتوقعة**: تظهر رسالة خطأ بجانب حقل "الاسم".

#### TE2.4: إضافة عميل - صيغة بريد إلكتروني غير صالحة
- **الإجراء**: أدخل بريد إلكتروني غير صالح.
- **النتيجة المتوقعة**: تظهر رسالة خطأ تحقق لحقل البريد الإلكتروني.

#### TE2.5: إضافة عميل - بريد إلكتروني مكرر
- **الإجراء**: حاول إضافة عميل بنفس البريد الإلكتروني.
- **النتيجة المتوقعة**: تظهر رسالة خطأ "البريد الإلكتروني مسجل مسبقاً".

#### TE2.6: إضافة عميل - الحقول الاختيارية فارغة
- **الإجراء**: أدخل الاسم فقط.
- **النتيجة المتوقعة**: يتم إضافة العميل بقيم فارغة للحقول الاختيارية.

#### TE2.7: إلغاء نموذج إضافة عميل
- **الإجراء**: انقر "إلغاء" أثناء إدخال البيانات.
- **النتيجة المتوقعة**: يتم إغلاق النموذج دون إنشاء العميل.

---

### 3. تعديل عميل موجود

#### TE3.1: فتح نموذج تعديل عميل
- **الإجراء**: انقر على زر "تعديل" بجانب العميل.
- **النتيجة المتوقعة**: يتم فتح النموذج مع بيانات العميل.

#### TE3.2: تعديل عميل - تحديث الاسم
- **الإجراء**: حدث الاسم وانقر "حفظ".
- **النتيجة المتوقعة**: يتم تحديث الاسم بنجاح.

#### TE3.3: تعديل عميل - تحديث البريد الإلكتروني (إلى بريد جديد)
- **الإجراء**: غير البريد الإلكتروني إلى جديد.
- **النتيجة المتوقعة**: يتم تحديث البريد الإلكتروني.

#### TE3.4: تعديل عميل - بريد إلكتروني موجود
- **الإجراء**: حاول تغيير البريد إلى بريد مستخدم مسبقًا.
- **النتيجة المتوقعة**: تظهر رسالة خطأ.

#### TE3.5: تعديل عميل - بيانات غير صالحة
- **الإجراء**: أدخل اسمًا فارغًا.
- **النتيجة المتوقعة**: تظهر رسالة خطأ بجانب الحقل.

#### TE3.6: إلغاء نموذج تعديل العميل
- **الإجراء**: انقر "إلغاء".
- **النتيجة المتوقعة**: لا يتم حفظ التغييرات.

---

### 4. حذف عميل

#### TE4.1: بدء حذف عميل
- **الإجراء**: انقر على زر "حذف".
- **النتيجة المتوقعة**: تظهر نافذة تأكيد.

#### TE4.2: إلغاء الحذف
- **الإجراء**: انقر "إلغاء" في نافذة التأكيد.
- **النتيجة المتوقعة**: يبقى العميل دون حذف.

#### TE4.3: تأكيد الحذف
- **الإجراء**: انقر "تأكيد".
- **النتيجة المتوقعة**: يتم حذف العميل بنجاح مع رسالة تأكيد.

#### TE4.4: محاولة حذف عميل لديه سجلات مرتبطة
- **الإجراء**: حاول حذف عميل مرتبط بمبيعات.
- **النتيجة المتوقعة**: تظهر رسالة خطأ بسبب السجلات المرتبطة.

---

### 5. الصلاحيات

#### TE5.1: مستخدم بدون صلاحية view-clients
- **الإجراء**: تسجيل الدخول كمستخدم غير مصرح له.
- **النتيجة المتوقعة**: لا يمكنه رؤية صفحة العملاء.

#### TE5.2: مستخدم لديه view-clients ولكن ليس create-clients
- **الإجراء**: قم بتسجيل الدخول.
- **النتيجة المتوقعة**: يرى العملاء، لكن لا يستطيع إضافة عميل.

#### TE5.3: مستخدم لديه view-clients, edit-clients ولكن ليس delete-clients
- **الإجراء**: قم بتسجيل الدخول.
- **النتيجة المتوقعة**: يمكنه التعديل وليس الحذف.

---

## ملاحظات إضافية
- تأكد من تحديث المتطلبات بناءً على التحديثات الأخيرة للنظام.
- تحقق من السلوك المتوقع مع فريق التطوير أو الوثائق الفنية.
